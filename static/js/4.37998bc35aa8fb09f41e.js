webpackJsonp([4],{"0pjD":function(t,e){},Mrzs:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mvHQ"),a=s.n(n),o=s("iKWp"),l=new web3.eth.Contract(o.a.LPMintabi,o.a.LPContact),i={data:function(){return{drawer:!1,direction:"btt",amount:"",currentCoin:"",popBalance:"--",index:0,tokens:[{pid:0,token:"HOT_HOG_LP",total:"--",output:"--",totalIncome:12,myPledge:"--",myIncome:"--",balance:"--",invested:!0,address:o.a.HOT_HOG_LP,isAllow:!1,canWithdraw:"--"},{pid:1,token:"HUSD_HOG_LP",total:"--",output:"--",totalIncome:12,myPledge:"--",myIncome:"--",balance:"--",invested:!0,address:o.a.HUSD_HOG_LP,isAllow:!1,canWithdraw:"--"}],onlyIn:!1,showPool:!0,address:"",vpop:!1}},mounted:function(){var t=this;t.$getAddress(),setTimeout(function(){t.isAllowance("HOT_HOG_LP",0),t.isAllowance("HUSD_HOG_LP",1),t.getUserInfo(0),t.getUserInfo(1),t.getBalance("HOT_HOG_LP",0),t.getBalance("HUSD_HOG_LP",1),t.lookCanWithdraw(0),t.lookCanWithdraw(1),t.numByPerDay("HOT_HOG_LP",0),t.numByPerDay("HUSD_HOG_LP",1),t.totalPledge("HOT_HOG_LP",0),t.totalPledge("HUSD_HOG_LP",1)},1e3)},filters:{tokenName:function(t){return"HOT_HOG_LP"==t?"HOT-HOG":"HUSD-HOG"}},methods:{onWithDraw:function(t,e){var s=this,n=new BigNumber(e).multipliedBy(BigNumber(10).pow(18));console.log("index:"+t,"value:"+n),l.methods.withdraw(t,n).send({from:s.address}).then(function(e){s.getUserInfo(t)})},showDraw:function(){this.drawer=!0},onToMdex:function(){},all:function(){this.amount=this.popBalance},handleClose:function(){this.vpop=!1,this.index="",this.currentCoin="",this.popBalance=""},showPop:function(t,e){this.vpop=!0,this.index=t,this.currentCoin=e,this.popBalance=this.tokens[t].balance,console.log("index:"+this.index+"balance:"+this.popBalance)},deposit:function(t){var e=this,s=new BigNumber(e.amount).multipliedBy(BigNumber(10).pow(18));console.log("index:"+t,"value:"+s),l.methods.deposit(t,s).send({from:e.address}).then(function(s){e.getUserInfo(t),e.vpop=!1})},approve:function(t,e){var s=new web3.eth.Contract(o.a.LPTokenabi,e),n=new BigNumber(1e7).multipliedBy(BigNumber(10).pow(18));s.methods.approve(o.a.LPContact,n).send({from:this.address}).then(function(t){})},isAllowance:function(t,e){var s=this,n=new web3.eth.Contract(o.a.LPTokenabi,o.a[t]);console.log(s.address,o.a.LPContact),n.methods.allowance(s.address,o.a.LPContact).call({from:s.address}).then(function(n){s.tokens[e].isAllow=!(n>0),console.log(t+"授权数量："+n/1e18)})},getUserInfo:function(t){var e=this;l.methods.userInfo(t,e.address).call({from:e.address}).then(function(s){e.tokens[t].myPledge=s.amount/1e18,e.tokens[t].myIncome=s.rewardDebt/1e18,console.log(t+"池子的信息："+a()(s))})},getBalance:function(t,e){var s=this;new web3.eth.Contract(o.a.LPTokenabi,o.a[t]).methods.balanceOf(s.address).call({from:s.address}).then(function(n){s.tokens[e].balance=n/1e18,console.log(t+"余额："+n/1e18)})},totalPledge:function(t,e){var s=this;console.log("总质押地址"+o.a[t]),console.log("LPTokenabi:"+a()(o.a.LPTokenabi)),console.log("LPMintabi:"+a()(o.a.LPMintabi)),new web3.eth.Contract(o.a.LPTokenabi,o.a[t]).methods.balanceOf(o.a.LPMintabi).call({from:s.address}).then(function(n){s.tokens[e].total=n/1e18,console.log(t+"总质押："+n/1e18)})},lookCanWithdraw:function(t){var e=this;l.methods.pendingHusky(t,e.address).call({from:e.address}).then(function(s){e.tokens[t].canWithdraw=s/1e18,console.log(t+"池可提取："+s/1e18)})},numByPerDay:function(t,e){var s=this;l.methods.numByPerDay(e).call({from:s.address}).then(function(t){s.tokens[e].output=t/1e18,console.log(e+"日产量："+t/1e18)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lp_page"},[s("div",{staticClass:"lp_switch"},[s("el-switch",{attrs:{"inactive-color":"#BECBD2","active-color":"#56C9C2"},model:{value:t.onlyIn,callback:function(e){t.onlyIn=e},expression:"onlyIn"}}),t._v("\n      只看已投\n    ")],1),t._v(" "),t._l(t.tokens,function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.invested||!t.onlyIn,expression:"value.invested || !onlyIn"}],key:n,staticClass:"hot_lp_item"},[s("div",{staticClass:"new"}),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"title",attrs:{span:18}},[t._v(t._s(t._f("tokenName")(e.token))+" Mdex LP")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:6}},[s("div",{staticClass:"icon"})])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("年化收益：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v("\n        216%\n        "),s("div",{staticClass:"icon icon_small"}),t._v(" "),s("div",{staticClass:"icon icon_small"})])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("总锁仓量：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v("\n          "+t._s(e.total)+"\n        ")])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("已存：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.myPledge))])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("我的总收益：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.myIncome)+" HUSKY")])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("当前收益:")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.canWithdraw)+" HUSKY")])],1),t._v(" "),s("el-row",{attrs:{type:"flex",gutter:20,justify:"space-between"}},[s("el-col",[s("div",{staticClass:"button button_border",on:{click:function(s){return t.onWithDraw(n,e.myPledge)}}},[t._v("撤回")])]),t._v(" "),s("el-col",[s("div",{staticClass:"button button_border",on:{click:function(s){return t.showPop(n,e.token)}}},[t._v("质押")])])],1),t._v(" "),e.isAllow?s("div",{staticClass:"button button_fill",on:{click:function(s){return t.approve(e.token,e.address)}}},[t._v("授权 "+t._s(t._f("tokenName")(e.token))+" Mdex LP")]):t._e(),t._v(" "),s("div",{staticClass:"button button_fill",on:{click:function(e){return t.onWithDraw(n,1)}}},[t._v("领取收益")]),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"can_use_left",attrs:{span:16}},[t._v(t._s(t._f("tokenName")(e.token))+" Mdex LP可用：")]),t._v(" "),s("el-col",{staticClass:"can_use_right",attrs:{span:8}},[t._v(t._s(e.balance))])],1),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"end"}},[s("el-col",{staticClass:"to_get",attrs:{span:24},on:{click:t.onToMdex}},[t._v("获得HOT-HBTC Mdex LP > ")])],1)],1)}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.vpop,expression:"vpop"}],staticClass:"shadow"},[s("div",{staticClass:"my_form"},[s("div",{staticClass:"title"},[t._v("质押 "+t._s(t.currentCoin)+" "),s("button",{on:{click:t.handleClose}},[t._v("关闭")])]),t._v(" "),s("div",{staticClass:"input_box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),t._v(" "),s("span",[t._v(t._s(t.currentCoin))]),t._v(" "),s("span",{staticClass:"btn_all",on:{click:t.all}},[t._v("全部")])]),t._v(" "),s("div",{staticClass:"balance"},[t._v("\n         余额：\n          "),s("span",{staticClass:"red"},[t._v(t._s(t.popBalance)+" "+t._s(t.currentCoin))])]),t._v(" "),s("div",{staticClass:"sub_btn"},[s("button",{staticClass:"common_btn",on:{click:function(e){return t.deposit(t.index)}}},[t._v("质押")])])])])],2)},staticRenderFns:[]};var r=s("VU/8")(i,c,!1,function(t){s("0pjD")},"data-v-257f97ae",null);e.default=r.exports}});
//# sourceMappingURL=4.37998bc35aa8fb09f41e.js.map