webpackJsonp([3],{WkKl:function(t,e){},y2X5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),n=s.n(a),o=s("iKWp");if(void 0!==window.ethereum)var l=new web3.eth.Contract(o.a.Mintabi,o.a.minContact);var i={0:"HT",1:"HUSD",2:"HBTC",3:"BAGS"},c={data:function(){return{drawer:!1,direction:"btt",amount:"",currentCoin:"",popBalance:"--",index:0,tokens:[{pid:0,token:"HT",total:"--",output:"--",totalIncome:12,myPledge:"--",myIncome:"--",balance:"--",invested:!0,address:o.a.HT,isAllow:!1,canWithdraw:"--"},{pid:1,token:"HUSD",total:"--",output:"--",totalIncome:12,myPledge:"--",myIncome:"--",balance:"--",invested:!0,address:o.a.HUSD,isAllow:!1,canWithdraw:"--"},{pid:2,token:"HBTC",total:"--",output:"--",totalIncome:12,myPledge:"--",myIncome:"--",balance:"--",invested:!1,address:o.a.HBTC,isAllow:!1,canWithdraw:"--"},{pid:3,token:"BAGS",total:"--",output:"--",totalIncome:12,myPledge:"--",myIncome:"--",balance:"--",invested:!1,address:o.a.BAGS,isAllow:!1,canWithdraw:"--"}],onlyIn:!1,showPool:!0,address:"",vpop:!1,dialogVisible:!1}},mounted:function(){var t=this;void 0!==window.ethereum&&(t.$getAddress(),setTimeout(function(){t.getData()},1e3))},methods:{getData:function(){for(var t in i)this.isAllowance(i[t],t),this.getUserInfo(t),this.getBalance(i[t],t),this.totalPledge(i[t],t),this.lookCanWithdraw(t)},onWithDraw:function(t,e){var s=this;if(console.log(e),0!=s.tokens[t].myPledge)if(1!=e||0!=s.tokens[t].canWithdraw){var a=new BigNumber(e).multipliedBy(BigNumber(10).pow(18));console.log("index:"+t,"value:"+a),l.methods.withdraw(t,a).send({from:s.address}).then(function(t){s.getData(),s.$message.success("操作成功！")},function(t){s.$message.warning("操作失败!")})}else this.$message.warning("没有可领取的");else this.$message.warning("暂未参与！")},all:function(){this.amount=this.popBalance},hidePop:function(){this.dialogVisible=!1,this.amount="",this.index="",this.popBalance=""},showPop:function(t,e){this.dialogVisible=!0,this.index=t,this.currentCoin=e,this.popBalance=this.tokens[t].balance,console.log("index:"+this.index+"balance:"+this.popBalance)},deposit:function(t){var e=this;if(""==e.amount||e.amount<=0)e.$message.warning("数量必须大于0!");else if(e.amount>e.popBalance)e.$message.warning("余额不足!");else{e.dialogVisible=!1;var s=new BigNumber(e.amount).multipliedBy(BigNumber(10).pow(18));l.methods.deposit(t,s).send({from:e.address}).then(function(t){e.getData(),e.$message.success("质押成功！")},function(t){e.$message.warning("操作失败!")})}},approve:function(t,e){var s=this,a=new web3.eth.Contract(o.a.ERC20abi,e),n=new BigNumber(1e7).multipliedBy(BigNumber(10).pow(18));a.methods.approve(o.a.minContact,n).send({from:s.address}).then(function(t){s.getData(),s.$message.success("授权成功！")},function(t){s.$message.warning("操作失败!")})},isAllowance:function(t,e){var s=this,a=new web3.eth.Contract(o.a.ERC20abi,o.a[t]);console.log(s.address,o.a.minContact),a.methods.allowance(s.address,o.a.minContact).call({from:s.address}).then(function(a){s.tokens[e].isAllow=!(a>0),console.log(t+"授权数量："+a/1e18)})},getUserInfo:function(t){var e=this;l.methods.userInfo(t,e.address).call({from:e.address}).then(function(s){e.tokens[t].myPledge=s.amount/1e18,e.tokens[t].myIncome=s.rewardDebt/1e18,console.log(t+"池子的信息："+n()(s))})},getBalance:function(t,e){var s=this;new web3.eth.Contract(o.a.ERC20abi,o.a[t]).methods.balanceOf(s.address).call({from:s.address}).then(function(a){s.tokens[e].balance=a/1e18,console.log(t+"余额："+a/1e18)})},totalPledge:function(t,e){var s=this;new web3.eth.Contract(o.a.ERC20abi,o.a[t]).methods.balanceOf(o.a.minContact).call({from:s.address}).then(function(a){s.tokens[e].total=a/1e18,console.log(t+"总质押："+a/1e18)})},lookCanWithdraw:function(t){var e=this;l.methods.pendingHog(t,e.address).call({from:e.address}).then(function(s){e.tokens[t].canWithdraw=s/1e18,console.log(t+"池可提取："+s/1e18)})},numByPerDay:function(t,e){var s=this;l.methods.numByPerDay(e).call({from:s.address}).then(function(t){s.tokens[e].output=t/1e18,console.log(e+"日产量："+t/1e18)})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lp_page"},[s("div",{staticClass:"lp_switch"},[s("el-switch",{attrs:{"inactive-color":"#BECBD2","active-color":"#56C9C2"},model:{value:t.onlyIn,callback:function(e){t.onlyIn=e},expression:"onlyIn"}}),t._v("\n    只看已投\n  ")],1),t._v(" "),t._l(t.tokens,function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.invested||!t.onlyIn,expression:"value.invested || !onlyIn"}],key:a,staticClass:"hot_lp_item"},[s("div",{staticClass:"new"}),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"title",attrs:{span:18}},[t._v(t._s(e.token))]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:6}},[s("div",{staticClass:"icon"})])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("总质押：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v("\n        "+t._s(e.total)+" "+t._s(e.token)+"\n      ")])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("日产量：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.output))])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("当前用户总收益：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.totalIncome)+"%")])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("我的质押：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.myPledge)+" "+t._s(e.token))])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("我的收益：")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.myIncome)+" HOT")])],1),t._v(" "),s("el-row",{staticClass:"row",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"col_left",attrs:{span:12}},[t._v("可提取")]),t._v(" "),s("el-col",{staticClass:"col_right",attrs:{span:12}},[t._v(t._s(e.canWithdraw)+" HOT")])],1),t._v(" "),s("el-row",{attrs:{type:"flex",gutter:20,justify:"space-between"}},[s("el-col",[s("div",{staticClass:"button button_border",on:{click:function(s){return t.onWithDraw(a,e.myPledge)}}},[t._v("\n          撤回\n        ")])]),t._v(" "),s("el-col",[s("div",{staticClass:"button button_border",on:{click:function(s){return t.showPop(a,e.token)}}},[t._v("\n          质押\n        ")])])],1),t._v(" "),e.isAllow?s("div",{staticClass:"button button_fill",on:{click:function(s){return t.approve(e.token,e.address)}}},[t._v("\n      授权HOT-HBTC\n    ")]):t._e(),t._v(" "),s("div",{staticClass:"button button_fill",on:{click:function(e){return t.onWithDraw(a,1)}}},[t._v("\n      领取收益\n    ")]),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-between"}},[s("el-col",{staticClass:"can_use_left",attrs:{span:16}},[t._v("可用："+t._s(e.balance))])],1)],1)}),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible,"show-close":!1,width:"calc(100% - 50px)","custom-class":"invite_model",title:"质押 "+t.currentCoin,center:""}},[s("div",{staticClass:"input_box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:"质押数量"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),t._v(" "),s("button",{staticClass:"max",on:{click:t.all}},[t._v("MAX")])]),t._v(" "),s("div",{staticClass:"balance"},[t._v("余额："+t._s(t.popBalance)+" "+t._s(t.currentCoin))]),t._v(" "),s("div",{staticClass:"dialog-footer"},[s("button",{on:{click:t.hidePop}},[t._v("取 消")]),t._v(" "),s("button",{staticClass:"confirm",on:{click:function(e){return t.deposit(t.index)}}},[t._v("确 定")])]),t._v(" "),s("div",{staticClass:"tip"},[t._v("\n      提示：请确保您的钱包有足够的HT，以确保Heco链上转账的完成。\n    ")])])],2)},staticRenderFns:[]};var d=s("VU/8")(c,r,!1,function(t){s("WkKl")},"data-v-36030a23",null);e.default=d.exports}});
//# sourceMappingURL=3.dbde1dd8fc049e19514c.js.map